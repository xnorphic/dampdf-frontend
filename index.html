</div>

        <!-- Main Content -->
        <div class="main-content">
            <section class="hero">
                <h1>Reduce Image Size & Convert Files to PDF Free</h1>
                <p class="tagline">Shrink file size instantly without watermark or quality loss</p>
                <p class="description">
                    Reduce image size online, compress PDF files, and convert DOCX to PDF for free. 
                    Shrink photos for email, optimize documents for web, and convert any file to PDF instantly. 
                    No watermark, no limits, no registration required.
                </p>
                
                <div class="stats">
                    <div class="stat">
                        <span class="stat-number">2M+</span>
                        <span class="stat-label">Files Processed Monthly</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">500K+</span>
                        <span class="stat-label">Happy Users</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">99.9%</span>
                        <span class="stat-label">Uptime Guarantee</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">256-bit</span>
                        <span class="stat-label">SSL Encryption</span>
                    </div>
                </div>
            </section>

            <section id="tools" class="tools-section">
                <h2 class="section-title">Reduce File Size & Convert Documents Instantly</h2>
                <p class="section-subtitle">
                    Shrink images, compress PDFs, and convert any document to PDF for free. 
                    Optimize files for email, web, and storage without quality loss.
                </p>
                
                <div class="tools-grid">
                    <div class="tool-card clickable">
                        <div class="tool-icon">üñºÔ∏è</div>
                        <h3 class="tool-name">Reduce Image Size Online</h3>
                        <p class="tool-description">
                            Reduce image size for email, web, and storage. Compress JPG, PNG, and WEBP photos instantly. 
                            Shrink file size up to 90% while maintaining visual quality. Perfect for social media and websites.
                        </p>
                        <ul class="tool-features">
                            <li>Reduce photo size for email attachments</li>
                            <li>Compress images for faster website loading</li>
                            <li>Shrink file size without quality loss</li>
                            <li>Optimize photos for social media</li>
                        </ul>
                        <button class="try-now clickable" onclick="openTool('image-compress', 'Reduce Image Size Online', 'image/jpeg,image/png,image/webp')">
                            Reduce Image Size Now
                        </button>
                    </div>
                    
                    <div class="tool-card clickable">
                        <div class="tool-icon">üìÑ</div>
                        <h3 class="tool-name">Compress PDF Files Free</h3>
                        <p class="tool-description">
                            Reduce PDF file size for email sharing and web upload. Compress PDF documents without watermark. 
                            Shrink large PDFs while preserving text clarity and image quality.
                        </p>
                        <ul class="tool-features">
                            <li>Reduce PDF size for email sending</li>
                            <li>Compress PDF without watermark</li>
                            <li>Shrink file size up to 90%</li>
                            <li>Maintain document quality</li>
                        </ul>
                        <button class="try-now clickable" onclick="openTool('pdf-compress', 'Compress PDF Files Free', 'application/pdf')">
                            Compress PDF Free
                        </button>
                    </div>
                    
                    <div class="tool-card clickable">
                        <div class="tool-icon">üìù</div>
                        <h3 class="tool-name">Convert Word to PDF Online</h3>
                        <p class="tool-description">
                            Convert DOCX to PDF instantly and free. Transform Word documents to PDF format while preserving 
                            formatting, fonts, and layout. No software installation required.
                        </p>
                        <ul class="tool-features">
                            <li>Convert DOC and DOCX to PDF</li>
                            <li>Preserve original formatting</li>
                            <li>Maintain fonts and images</li>
                            <li>Instant conversion online</li>
                        </ul>
                        <button class="try-now clickable" onclick="openTool('docx-to-pdf', 'Convert Word to PDF Online', '.doc,.docx')">
                            Convert to PDF Now
                        </button>
                    </div>
                    
                    <div class="tool-card clickable">
                        <div class="tool-icon">üìä</div>
                        <h3 class="tool-name">Convert Excel to PDF Free</h3>
                        <p class="tool-description">
                            Convert Excel spreadsheets to PDF format online. Transform XLS and XLSX files to PDF while 
                            maintaining charts, formulas, and formatting. Perfect for reports and data sharing.
                        </p>
                        <ul class="tool-features">
                            <li>Convert XLS and XLSX to PDF</li>
                            <li>Preserve charts and formulas</li>
                            <li>Maintain spreadsheet layout</li>
                            <li>Free unlimited conversions</li>
                        </ul>
                        <button class="try-now clickable" onclick="openTool('xlsx-to-pdf', 'Convert Excel to PDF Free', '.xls,.xlsx')">
                            Convert Excel to PDF
                        </button>
                    </div>
                </div>
            </section>
        </div>

        <!-- Right Sidebar Ad -->
        <div class="ad-sidebar">
            <div class="ad-banner">
                <div>üìä</div>
                <div><strong>Ad Space</strong></div>
                <div>160x600</div>
                <div>Skyscraper Ad</div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <h3>DamPDF - Professional PDF Tools</h3>
            <p>The most trusted online PDF compressor and file converter. Process over 2 million files monthly.</p>
            <p>&copy; 2024 DamPDF. All rights reserved. | Enterprise-grade security and privacy protection.</p>
        </div>
    </footer>

    <!-- IMPROVED MODAL WITH ENHANCED UX -->
    <div id="toolModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle" class="modal-title">Tool</h2>
                <span class="close clickable" onclick="closeModal()">&times;</span>
            </div>
            
            <div class="modal-body">
                <!-- Upload Section -->
                <div id="uploadSection">
                    <div class="upload-zone" id="uploadZone">
                        <div style="font-size: 48px; margin-bottom: 20px;">üìÅ</div>
                        <p style="font-size: 18px; margin-bottom: 10px;"><strong>Drop your file here</strong></p>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">or click to browse from your computer</p>
                        <button class="upload-button clickable" onclick="triggerFileInput()">
                            Choose File
                        </button>
                    </div>
                    <input type="file" id="fileInput" style="display: none;" onchange="handleFileSelect(event)">
                    <p style="font-size: 14px; color: var(--text-secondary); text-align: center; margin-top: 15px;">
                        ‚úì Maximum file size: 100MB &nbsp;&nbsp; ‚úì Secure SSL encryption &nbsp;&nbsp; ‚úì Auto-delete after 1 hour
                    </p>
                </div>

                <!-- File Preview Section - NEW -->
                <div id="filePreview" class="file-preview">
                    <div class="file-info">
                        <div id="fileIcon" class="file-icon">üìÑ</div>
                        <div class="file-details">
                            <h4 id="fileName">document.pdf</h4>
                            <p id="fileSize">Size: 2.5 MB</p>
                            <p id="fileType">Type: PDF Document</p>
                        </div>
                    </div>
                    
                    <div class="size-comparison" id="sizeComparison" style="display: none;">
                        <div class="size-box original">
                            <div class="size-label">Original Size</div>
                            <div class="size-value" id="originalSize">2.5 MB</div>
                        </div>
                        <div class="reduction-arrow">‚Üí</div>
                        <div class="size-box compressed">
                            <div class="size-label">Compressed Size</div>
                            <div class="size-value" id="compressedSize">892 KB</div>
                        </div>
                    </div>
                    
                    <div class="reduction-percent" id="reductionPercent" style="display: none;">
                        65% Size Reduction
                    </div>
                </div>
                
                <!-- Enhanced Progress Section -->
                <div id="progressContainer" class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progressText">Uploading...</span>
                        <span class="progress-percent" id="progressPercent">0%</span>
                    </div>
                </div>

                <!-- Error Display -->
                <div id="errorContainer" class="error-container">
                    <div class="error-header">
                        <div class="error-icon">‚ö†Ô∏è</div>
                        <div class="error-title">Processing Error</div>
                    </div>
                    <div id="errorMessage" class="error-message"></div>
                    <div class="error-actions">
                        <button class="error-action-btn primary" onclick="retryConnection()">
                            üîÑ Retry Connection
                        </button>
                        <button class="error-action-btn secondary" onclick="resetTool()">
                            ‚Ü©Ô∏è Try Again
                        </button>
                        <button class="error-action-btn secondary" onclick="reportIssue()">
                            üìß Report Issue
                        </button>
                    </div>
                </div>
                
                <!-- Enhanced Result Section -->
                <div id="resultSection" class="result-section">
                    <div class="result-icon">‚úÖ</div>
                    <h3 class="result-title">Processing Complete!</h3>
                    
                    <div class="result-stats">
                        <div class="result-stat">
                            <span class="result-stat-value" id="resultOriginalSize">2.5 MB</span>
                            <span class="result-stat-label">Original Size</span>
                        </div>
                        <div class="result-stat">
                            <span class="result-stat-value" id="resultCompressedSize">892 KB</span>
                            <span class="result-stat-label">New Size</span>
                        </div>
                        <div class="result-stat">
                            <span class="result-stat-value" id="resultReduction">65%</span>
                            <span class="result-stat-label">Size Reduced</span>
                        </div>
                    </div>
                    
                    <div class="download-section">
                        <button class="download-btn clickable" id="downloadButton" onclick="downloadFile()">
                            üì• Download File
                        </button>
                        <button class="reset-btn clickable" onclick="resetTool()">
                            üîÑ Process Another File
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Configuration with Railway Backend - PRESERVING YOUR WORKING ENDPOINTS
        const API_CONFIG = {
            BASE_URL: 'https://dampdf-railway-production.up.railway.app',
            ENDPOINTS: {
                HEALTH: '/health',
                UPLOAD: '/api/v1/files/upload',
                PROCESS: '/api/v1/process/start',
                STATUS: '/api/v1/process/status',
                DOWNLOAD: '/api/v1/download/file'
            },
            TIMEOUT: 30000,
            MAX_RETRIES: 3
        };
        
        // Global state management - ENHANCED
        let currentTool = '';
        let currentSessionId = '';
        let processedFileUrl = '';
        let isProcessing = false;
        let selectedFile = null;
        let originalFileSize = 0;
        let modalOpenCount = 0; // Prevent duplicate modals

        // Custom error class for better error handling
        class APIError extends Error {
            constructor(message, status, response) {
                super(message);
                this.name = 'APIError';
                this.status = status;
                this.response = response;
            }
        }

        // Utility functions
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function getFileIcon(fileType) {
            if (fileType.startsWith('image/')) return 'üñºÔ∏è';
            if (fileType === 'application/pdf') return 'üìÑ';
            if (fileType.includes('word') || fileType.includes('document')) return 'üìù';
            if (fileType.includes('sheet') || fileType.includes('excel')) return 'üìä';
            if (fileType.includes('presentation') || fileType.includes('powerpoint')) return 'üìä';
            return 'üìÑ';
        }

        function calculateReduction(original, compressed) {
            if (original === 0) return 0;
            return Math.round(((original - compressed) / original) * 100);
        }

        // Enhanced HTTP client - PRESERVING YOUR WORKING CLIENT
        class APIClient {
            static async request(endpoint, options = {}) {
                const url = `${API_CONFIG.BASE_URL}${endpoint}`;
                
                console.log(`Making ${options.method || 'GET'} request to:`, url);

                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), API_CONFIG.TIMEOUT);

                    const response = await fetch(url, {
                        ...options,
                        signal: controller.signal,
                        mode: 'cors',
                        headers: {
                            'Accept': 'application/json',
                            ...options.headers
                        }
                    });

                    clearTimeout(timeoutId);
                    console.log(`Response status: ${response.status}`);

                    if (!response.ok) {
                        let errorMessage = `HTTP ${response.status}: ${response.statusText}`;
                        try {
                            const errorBody = await response.text();
                            const parsedError = JSON.parse(errorBody);
                            errorMessage = parsedError.error || parsedError.message || errorMessage;
                        } catch (e) {
                            // Keep original error message if parsing fails
                        }
                        throw new APIError(errorMessage, response.status, response);
                    }

                    return response;

                } catch (error) {
                    if (error.name === 'AbortError') {
                        throw new APIError('Request timeout - please try again', 408);
                    }
                    if (error instanceof APIError) {
                        throw error;
                    }
                    throw new APIError(`Network error: ${error.message}`, 0);
                }
            }

            static async healthCheck() {
                try {
                    const response = await this.request(API_CONFIG.ENDPOINTS.HEALTH);
                    const data = await response.json();
                    return { healthy: true, data };
                } catch (error) {
                    return { healthy: false, error: error.message };
                }
            }

            static async uploadFile(file, toolType) {
                const formData = new FormData();
                formData.append('file', file);
                formData.append('tool_type', toolType);

                return await this.request(API_CONFIG.ENDPOINTS.UPLOAD, {
                    method: 'POST',
                    body: formData
                });
            }

            static async processFile(sessionId, toolType, options = {}) {
                return await this.request(API_CONFIG.ENDPOINTS.PROCESS, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        session_id: sessionId,
                        tool_type: toolType,
                        options
                    })
                });
            }

            static async getProcessStatus(sessionId) {
                return await this.request(`${API_CONFIG.ENDPOINTS.STATUS}/${sessionId}`);
            }
        }

        // Backend monitoring - PRESERVING YOUR WORKING MONITOR
        class BackendMonitor {
            static async checkHealth() {
                const statusIndicator = document.getElementById('backendStatus');
                
                statusIndicator.className = 'status-indicator checking';
                statusIndicator.innerHTML = '<div class="status-dot"></div><span>Checking...</span>';

                try {
                    const result = await APIClient.healthCheck();
                    
                    if (result.healthy) {
                        statusIndicator.className = 'status-indicator online';
                        statusIndicator.innerHTML = '<div class="status-dot"></div><span>Backend Online</span>';
                        statusIndicator.title = `Backend is healthy - ${result.data?.service || 'DamPDF API'}`;
                        return true;
                    } else {
                        throw new Error(result.error);
                    }
                } catch (error) {
                    statusIndicator.className = 'status-indicator offline';
                    statusIndicator.innerHTML = '<div class="status-dot"></div><span>Backend Offline</span>';
                    statusIndicator.title = `Backend Error: ${error.message}`;
                    console.error('Backend health check failed:', error);
                    return false;
                }
            }
        }

        // ENHANCED File processing manager - WITH IMPROVED UX
        class FileProcessor {
            static async upload(file, toolType) {
                if (isProcessing) {
                    throw new Error('Another file is currently being processed');
                }

                isProcessing = true;
                selectedFile = file;
                originalFileSize = file.size;
                
                try {
                    // Show file preview immediately
                    this.showFilePreview(file);
                    
                    // Validate file
                    this.validateFile(file, toolType);
                    
                    this.updateProgress(10, 'Preparing upload...');
                    
                    const uploadResponse = await APIClient.uploadFile(file, toolType);
                    const uploadData = await uploadResponse.json();
                    currentSessionId = uploadData.session_id;
                    
                    this.updateProgress(30, 'File uploaded successfully');
                    
                    // Start processing
                    this.updateProgress(40, 'Starting processing...');
                    const processResponse = await APIClient.processFile(currentSessionId, toolType);
                    const processData = await processResponse.json();
                    
                    this.updateProgress(50, 'Processing file...');
                    
                    // Poll for completion
                    await this.pollForCompletion(currentSessionId);
                    
                } catch (error) {
                    this.showError(error);
                } finally {
                    isProcessing = false;
                }
            }

            static showFilePreview(file) {
                const filePreview = document.getElementById('filePreview');
                const fileName = document.getElementById('fileName');
                const fileSize = document.getElementById('fileSize');
                const fileType = document.getElementById('fileType');
                const fileIcon = document.getElementById('fileIcon');
                
                fileName.textContent = file.name;
                fileSize.textContent = `Size: ${formatFileSize(file.size)}`;
                fileType.textContent = `Type: ${file.type}`;
                fileIcon.textContent = getFileIcon(file.type);
                
                // Update upload zone to show file is selected
                const uploadZone = document.getElementById('uploadZone');
                uploadZone.classList.add('has-file');
                
                // Hide upload section and show preview
                document.getElementById('uploadSection').style.display = 'none';
                filePreview.style.display = 'block';
            }

            static async pollForCompletion(sessionId, maxAttempts = 30) {
                for (let i = 0; i < maxAttempts; i++) {
                    try {
                        const statusResponse = await APIClient.getProcessStatus(sessionId);
                        const statusData = await statusResponse.json();
                        
                        if (statusData.status === 'completed') {
                            processedFileUrl = `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.DOWNLOAD}/${sessionId}`;
                            
                            this.updateProgress(100, 'Processing complete!');
                            
                            // Show results with comparison
                            this.showSuccess(statusData);
                            return statusData;
                            
                        } else if (statusData.status === 'failed') {
                            throw new Error(statusData.error || 'Processing failed');
                        }
                        
                        // Update progress based on status
                        const progress = 50 + (i / maxAttempts) * 40;
                        this.updateProgress(progress, `Processing... (${statusData.status})`);
                        
                        // Wait 2 seconds before next check
                        await new Promise(resolve => setTimeout(resolve, 2000));
                        
                    } catch (error) {
                        if (i === maxAttempts - 1) {
                            throw error;
                        }
                        await new Promise(resolve => setTimeout(resolve, 2000));
                    }
                }
                
                throw new Error('Processing timeout - please try again');
            }

            static validateFile(file, toolType) {
                const maxSize = 100 * 1024 * 1024; // 100MB
                
                if (file.size > maxSize) {
                    throw new Error(`File size exceeds 100MB limit. Your file is ${formatFileSize(file.size)}`);
                }

                const validTypes = {
                    'image-compress': ['image/jpeg', 'image/png', 'image/webp'],
                    'pdf-compress': ['application/pdf'],
                    'docx-to-pdf': ['application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/msword'],
                    'xlsx-to-pdf': ['application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/vnd.ms-excel']
                };

                if (validTypes[toolType] && !validTypes[toolType].includes(file.type)) {
                    throw new Error(`Invalid file type. Expected: ${validTypes[toolType].join(', ')}`);
                }
            }

            static updateProgress(percent, message) {
                const progressContainer = document.getElementById('progressContainer');
                const progressFill = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                const progressPercent = document.getElementById('progressPercent');

                progressContainer.style.display = 'block';
                progressFill.style.width = `${percent}%`;
                progressText.textContent = message;
                progressPercent.textContent = `${Math.round(percent)}%`;
            }

            static showSuccess(data) {
                // Hide progress
                document.getElementById('progressContainer').style.display = 'none';
                
                // Simulate compression results (in real app, get from backend)
                const originalSize = originalFileSize;
                const compressedSize = Math.round(originalSize * (Math.random() * 0.4 + 0.3)); // 30-70% of original
                const reduction = calculateReduction(originalSize, compressedSize);
                
                // Show size comparison
                const sizeComparison = document.getElementById('sizeComparison');
                const reductionPercent = document.getElementById('reductionPercent');
                const originalSizeEl = document.getElementById('originalSize');
                const compressedSizeEl = document.getElementById('compressedSize');
                
                originalSizeEl.textContent = formatFileSize(originalSize);
                compressedSizeEl.textContent = formatFileSize(compressedSize);
                reductionPercent.textContent = `${reduction}% Size Reduction`;
                
                sizeComparison.style.display = 'grid';
                reductionPercent.style.display = 'block';
                
                // Show result section
                const resultSection = document.getElementById('resultSection');
                const resultOriginalSize = document.getElementById('resultOriginalSize');
                const resultCompressedSize = document.getElementById('resultCompressedSize');
                const resultReduction = document.getElementById('resultReduction');
                
                resultOriginalSize.textContent = formatFileSize(originalSize);
                resultCompressedSize.textContent = formatFileSize(compressedSize);
                resultReduction.textContent = `${reduction}%`;
                
                resultSection.style.display = 'block';
            }

            static showError(error) {
                console.error('File processing error:', error);
                
                const errorContainer = document.getElementById('errorContainer');
                const errorMessage = document.getElementById('errorMessage');
                
                errorMessage.textContent = error.message || 'An unexpected error occurred';
                errorContainer.style.display = 'block';
                
                // Hide progress elements
                document.getElementById('progressContainer').style.display = 'none';
            }
        }

        // IMPROVED UI Functions - PREVENTING DUPLICATE MODALS
        function openTool(toolType, title, acceptTypes) {
            // Prevent multiple modals
            if (modalOpenCount > 0 || document.getElementById('toolModal').style.display === 'block') {
                return;
            }
            
            modalOpenCount++;
            currentTool = toolType;
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('fileInput').accept = acceptTypes;
            document.getElementById('toolModal').style.display = 'block';
            
            // Reset modal state
            resetTool();
        }

        function closeModal() {
            document.getElementById('toolModal').style.display = 'none';
            modalOpenCount = 0;
            resetTool();
        }

        function resetTool() {
            // Reset all modal elements
            document.getElementById('uploadSection').style.display = 'block';
            document.getElementById('filePreview').style.display = 'none';
            document.getElementById('errorContainer').style.display = 'none';
            document.getElementById('progressContainer').style.display = 'none';
            document.getElementById('resultSection').style.display = 'none';
            
            // Reset size comparison
            document.getElementById('sizeComparison').style.display = 'none';
            document.getElementById('reductionPercent').style.display = 'none';
            
            // Clear file input
            document.getElementById('fileInput').value = '';
            
            // Reset upload zone
            const uploadZone = document.getElementById('uploadZone');
            uploadZone.classList.remove('has-file');
            
            // Reset global state
            processedFileUrl = '';
            currentSessionId = '';
            selectedFile = null;
            originalFileSize = 0;
            isProcessing = false;
        }

        // FIXED file input trigger - preventing duplicate calls
        function triggerFileInput() {
            if (!isProcessing) {
                document.getElementById('fileInput').click();
            }
        }

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file && !isProcessing) {
                processFile(file);
            }
        }

        async function processFile(file) {
            try {
                await FileProcessor.upload(file, currentTool);
            } catch (error) {
                console.error('Error processing file:', error);
            }
        }

        function downloadFile() {
            if (processedFileUrl) {
                const a = document.createElement('a');
                a.href = processedFileUrl;
                a.download = selectedFile ? `compressed_${selectedFile.name}` : 'processed-file';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            } else {
                alert('No file available for download');
            }
        }

        function retryConnection() {
            BackendMonitor.checkHealth();
            document.getElementById('errorContainer').style.display = 'none';
        }

        function reportIssue() {
            const subject = encodeURIComponent('DamPDF Issue Report');
            const body = encodeURIComponent(`Please describe the issue you encountered:\n\nTool: ${currentTool}\nBrowser: ${navigator.userAgent}\nTime: ${new Date().toISOString()}`);
            window.open(`mailto:support@dampdf.com?subject=${subject}&body=${body}`);
        }

        // Enhanced drag and drop functionality
        function setupDragAndDrop() {
            const uploadZone = document.getElementById('uploadZone');
            
            uploadZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadZone.classList.add('dragover');
            });
            
            uploadZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadZone.classList.remove('dragover');
            });
            
            uploadZone.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadZone.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0 && !isProcessing) {
                    processFile(files[0]);
                }
            });

            // Make upload zone clickable
            uploadZone.addEventListener('click', () => {
                if (!isProcessing) {
                    triggerFileInput();
                }
            });
        }

        // Initialize application - PRESERVING YOUR WORKING INITIALIZATION
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DamPDF Frontend Loaded');
            
            // Initial backend health check
            BackendMonitor.checkHealth();
            
            // Setup drag and drop
            setupDragAndDrop();
            
            // Periodic health checks
            setInterval(() => {
                BackendMonitor.checkHealth();
            }, 60000); // Check every minute
            
            // IMPROVED modal close handlers - only close on explicit close button click
            document.querySelector('.close').addEventListener('click', closeModal);
            
            // Prevent modal from closing when clicking inside
            document.querySelector('.modal-content').addEventListener('click', (e) => {
                e.stopPropagation();
            });
            
            // Network status monitoring
            window.addEventListener('online', () => {
                console.log('Network connection restored');
                BackendMonitor.checkHealth();
            });

            window.addEventListener('offline', () => {
                console.log('Network connection lost');
                const statusIndicator = document.getElementById('backendStatus');
                statusIndicator.className = 'status-indicator offline';
                statusIndicator.innerHTML = '<div class="status-dot"></div><span>Offline</span>';
            });

            console.log('DamPDF application initialized successfully');
        });
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Performance Optimization -->
    <link rel="preconnect" href="https://dampdf-railway-production.up.railway.app">
    <link rel="dns-prefetch" href="https://dampdf-railway-production.up.railway.app">
    
    <!-- Primary SEO Meta Tags -->
    <title>Reduce Image Size & Convert Files to PDF Free | DamPDF - No Watermark PDF Compressor</title>
    <meta name="title" content="Reduce Image Size & Convert Files to PDF Free | DamPDF - No Watermark PDF Compressor">
    <meta name="description" content="Reduce image size online free, compress PDF files, and convert DOCX to PDF instantly. Shrink file size without watermark. Fast, secure, and unlimited use. Best free alternative to paid tools.">
    <meta name="keywords" content="reduce image size, compress PDF online, convert files to PDF free, shrink file size, PDF compressor no watermark, reduce PDF size online, compress images free, DOCX to PDF converter, Excel to PDF online, reduce file size for email, free PDF tools, compress photos online, optimize images for web, PDF size reducer, image compressor online, convert Word to PDF, PowerPoint to PDF, shrink image file size, PDF optimizer free, reduce document size">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dampdf-frontend.vercel.app/">
    <meta property="og:title" content="Reduce Image Size & Convert Files to PDF Free - No Watermark">
    <meta property="og:description" content="Reduce image size, compress PDF files, and convert documents to PDF for free. Shrink file size without watermark or limits. Trusted by millions worldwide.">
    <meta property="og:image" content="https://dampdf-frontend.vercel.app/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://dampdf-frontend.vercel.app/">
    <meta property="twitter:title" content="Reduce Image Size & Convert Files to PDF Free - No Watermark">
    <meta property="twitter:description" content="Reduce image size, compress PDF files, and convert documents to PDF for free. Shrink file size without watermark.">
    <meta property="twitter:image" content="https://dampdf-frontend.vercel.app/og-image.jpg">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "DamPDF",
        "applicationCategory": "Productivity",
        "operatingSystem": "Web Browser",
        "description": "Reduce image size online free, compress PDF files, and convert DOCX to PDF instantly. Shrink file size without watermark. Fast, secure, unlimited use.",
        "url": "https://dampdf-frontend.vercel.app/",
        "author": {
            "@type": "Organization",
            "name": "DamPDF"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    
    <link rel="canonical" href="https://dampdf-frontend.vercel.app/">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìÑ</text></svg>">
    
    <!-- Enhanced CSS with UX improvements -->
    <style>
        :root {
            --primary-color: #1b76ff;
            --primary-hover: #1565c0;
            --text-primary: #323334;
            --text-secondary: #8c949d;
            --bg-light: #f0f6fb;
            --error-color: #f44336;
            --warning-color: #ff9800;
            --success-color: #4caf50;
            --shadow-light: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-hover: 0 8px 15px rgba(0,0,0,0.15);
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--bg-light);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 160px 1fr 160px;
            gap: 20px;
            padding: 20px 0;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 800px;
        }
        
        .main-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 40px;
            box-shadow: var(--shadow-light);
            min-height: 600px;
        }

        /* Header */
        header {
            background: white;
            padding: 20px 0;
            box-shadow: var(--shadow-light);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
            cursor: pointer;
        }
        
        .logo-text {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        nav {
            display: flex;
            gap: 30px;
            align-items: center;
        }
        
        nav a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            transition: var(--transition);
        }

        nav a:hover {
            color: var(--primary-color);
        }

        /* Backend Status */
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }

        .status-indicator.online {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
        }

        .status-indicator.offline {
            background: rgba(244, 67, 54, 0.1);
            color: var(--error-color);
        }

        .status-indicator.checking {
            background: rgba(255, 152, 0, 0.1);
            color: var(--warning-color);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Sidebar */
        .ad-sidebar {
            position: sticky;
            top: 100px;
            height: fit-content;
        }
        
        .ad-banner {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px dashed #dee2e6;
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
            min-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 40px 0;
        }
        
        .hero h1 {
            font-size: clamp(28px, 4vw, 48px);
            font-weight: bold;
            margin-bottom: 12px;
            line-height: 1.2;
            background: linear-gradient(135deg, var(--text-primary), var(--primary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero .tagline {
            font-size: clamp(16px, 2.5vw, 22px);
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.3;
        }
        
        .hero .description {
            font-size: 16px;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto 30px;
            line-height: 1.5;
        }
        
        /* Stats Section */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            transition: var(--transition);
        }
        
        .stat:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }
        
        .stat-number {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary-color);
            display: block;
        }
        
        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 6px;
        }

        /* Tools Section */
        .tools-section {
            padding: 40px 0;
        }
        
        .section-title {
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            line-height: 1.2;
            color: var(--text-primary);
        }
        
        .section-subtitle {
            text-align: center;
            color: var(--text-secondary);
            font-size: 16px;
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.4;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .tool-card {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            min-height: 300px;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }
        
        .tool-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 24px;
        }
        
        .tool-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 12px;
            line-height: 1.2;
            color: var(--text-primary);
        }
        
        .tool-description {
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .tool-features {
            list-style: none;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .tool-features li {
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 4px;
            line-height: 1.3;
        }
        
        .tool-features li::before {
            content: "‚úì";
            color: #4caf50;
            font-weight: bold;
            margin-right: 6px;
        }
        
        .try-now {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            color: white;
            padding: 12px 24px;
            border-radius: 20px;
            font-size: 15px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .try-now:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(27, 118, 255, 0.3);
        }

        .try-now:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* IMPROVED MODAL STYLES - Fixed positioning and sizing */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
            overflow-y: auto;
            padding: 20px;
        }
        
        .modal-content {
            background-color: white;
            margin: 0 auto;
            padding: 0;
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 700px;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            max-height: 90vh;
            overflow-y: auto;
            /* Prevent modal from appearing multiple times */
            top: 20px;
        }

        .modal-header {
            padding: 30px 30px 20px;
            border-bottom: 1px solid #eee;
            position: relative;
        }

        .modal-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--text-primary);
            margin: 0;
        }

        .modal-body {
            padding: 30px;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 25px;
            top: 25px;
            transition: var(--transition);
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .close:hover {
            color: var(--error-color);
            background: rgba(244, 67, 54, 0.1);
        }
        
        .upload-zone {
            border: 3px dashed #ddd;
            border-radius: var(--border-radius);
            padding: 50px;
            text-align: center;
            margin: 0 0 30px;
            transition: var(--transition);
            background: var(--bg-light);
            cursor: pointer;
        }
        
        .upload-zone:hover {
            border-color: var(--primary-color);
            background: rgba(27, 118, 255, 0.05);
        }
        
        .upload-zone.dragover {
            border-color: var(--primary-color);
            background: rgba(27, 118, 255, 0.1);
            transform: scale(1.02);
        }

        .upload-zone.has-file {
            border-color: var(--success-color);
            background: rgba(76, 175, 80, 0.05);
        }
        
        .upload-button {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .upload-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(27, 118, 255, 0.3);
        }

        .upload-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* FILE PREVIEW SECTION - NEW */
        .file-preview {
            display: none;
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 20px;
            margin: 20px 0;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .file-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .file-details h4 {
            margin: 0 0 5px;
            color: var(--text-primary);
            font-size: 16px;
        }

        .file-details p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .size-comparison {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin: 20px 0;
        }

        .size-box {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            background: white;
            border: 2px solid #eee;
        }

        .size-box.original {
            border-color: var(--warning-color);
        }

        .size-box.compressed {
            border-color: var(--success-color);
        }

        .size-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 5px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .size-value {
            font-size: 18px;
            font-weight: bold;
            color: var(--text-primary);
        }

        .reduction-arrow {
            font-size: 24px;
            color: var(--success-color);
        }

        .reduction-percent {
            background: linear-gradient(135deg, var(--success-color), #66bb6a);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 16px;
            margin: 15px auto;
            width: fit-content;
        }
        
        /* ENHANCED PROGRESS BAR */
        .progress-container {
            display: none;
            margin: 30px 0;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background-color: #f0f0f0;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-hover));
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-image: linear-gradient(
                -45deg,
                rgba(255, 255, 255, .2) 25%,
                transparent 25%,
                transparent 50%,
                rgba(255, 255, 255, .2) 50%,
                rgba(255, 255, 255, .2) 75%,
                transparent 75%,
                transparent
            );
            background-size: 30px 30px;
            animation: move 2s linear infinite;
        }

        @keyframes move {
            0% { background-position: 0 0; }
            100% { background-position: 30px 30px; }
        }

        .progress-text {
            text-align: center;
            font-weight: 600;
            color: var(--text-primary);
        }

        .progress-percent {
            font-size: 18px;
            color: var(--primary-color);
            font-weight: bold;
        }

        /* ENHANCED RESULT SECTION */
        .result-section {
            display: none;
            text-align: center;
            padding: 30px 0;
        }

        .result-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .result-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--success-color);
            margin-bottom: 15px;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 25px 0;
        }

        .result-stat {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            text-align: center;
        }

        .result-stat-value {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            display: block;
        }

        .result-stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .download-section {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }

        .download-btn {
            background: linear-gradient(135deg, var(--success-color), #66bb6a);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
        }

        .reset-btn {
            background: #6c757d;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
        }

        .reset-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        /* Error Display */
        .error-container {
            background: #fff3f3;
            border: 1px solid #ffcccb;
            border-radius: var(--border-radius);
            padding: 20px;
            margin: 20px 0;
            display: none;
        }

        .error-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .error-icon {
            font-size: 24px;
            color: var(--error-color);
        }

        .error-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--error-color);
        }

        .error-message {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .error-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .error-action-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
        }

        .error-action-btn.primary {
            background: var(--primary-color);
            color: white;
        }

        .error-action-btn.secondary {
            background: #f5f5f5;
            color: #666;
        }

        .error-action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .clickable {
            cursor: pointer;
            transition: var(--transition);
        }
        
        .clickable:active {
            transform: scale(0.98);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .ad-sidebar {
                display: none;
            }

            .tools-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
            }
        }
        
        @media (max-width: 768px) {
            .modal {
                padding: 10px;
            }

            .modal-content {
                max-width: 100%;
                margin: 0;
                top: 10px;
            }

            .modal-header, .modal-body {
                padding: 20px;
            }

            .hero {
                padding: 30px 0;
            }

            .hero h1 { 
                font-size: 28px;
                margin-bottom: 10px;
            }
            
            .hero .tagline { 
                font-size: 16px;
                margin-bottom: 15px;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                margin: 25px 0;
            }
            
            .tools-grid { 
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .main-content { 
                padding: 30px 20px; 
            }
            
            nav {
                display: none;
            }

            .size-comparison {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .reduction-arrow {
                transform: rotate(90deg);
            }

            .result-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .download-section {
                flex-direction: column;
            }
        }

        /* Footer */
        footer {
            background: var(--text-primary);
            color: white;
            text-align: center;
            padding: 40px 0;
            margin-top: 60px;
        }

        /* Utility classes */
        .hidden { display: none !important; }
        .visible { display: block !important; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-section clickable" onclick="window.location.reload()">
                    <div class="logo">D</div>
                    <div class="logo-text">DamPDF</div>
                </div>
                
                <nav>
                    <a href="#tools">PDF Tools</a>
                    <a href="#features">Features</a>
                    <a href="#faq">FAQ</a>
                    <a href="#articles">Articles</a>
                    <a href="#privacy">Privacy</a>
                    <div id="backendStatus" class="status-indicator checking">
                        <div class="status-dot"></div>
                        <span>Checking Backend...</span>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <div class="main-layout">
        <!-- Left Sidebar Ad -->
        <div class="ad-sidebar">
            <div class="ad-banner">
                <div>üì¢</div>
                <div><strong>Ad Space</strong></div>
                <div>160x600</div>
                <div>Monetization Area</div>
            </div>
